# -*- coding: utf-8 -*-
"""2_CVI_Python_Plotting.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1w6WHRzaCqNJe1d-Z998TDgwx3aqgWyvX

# An√°lise e Visualiza√ß√£o de Dados com Python üêç


---

**Objetivos:**
* Conhecer o m√©todo plot() da biblioteca Pandas para gerar gr√°ficos.
* Implementar em c√≥digo Python a gera√ß√£o de gr√°ficos atrav√©s de DataFrames.
* Personalizar os gr√°ficos atrav√©s de op√ß√µes de configura√ß√£o dispon√≠veis.
* Exportar gr√°ficos usando o m√≥dulo Pyplot.

Ao longo deste *notebook*, deve preencher o c√≥digo quando indicado com a seguinte marca√ß√£o:
```python
### INSERIR C√ìDIGO AQUI ###
```

Bom trabalho!

## 1. Exemplo Pr√°tico - Titanic

Nesta sec√ß√£o, iremos analisar o conjunto de dados do Titanic, carregado num DataFrame. De seguida, pretendemos gerar algumas representa√ß√µes dos dados, nomeadamente:

1. A distribui√ß√£o por sexo;
2. A distribui√ß√£o por classe;
3. A distribui√ß√£o por porto de embarque (gr√°fico horizontal);
4. Histograma das idades.
"""

# Importar o m√≥dulo Pandas
import pandas as pd

# Importar o m√≥dulo matplotlib
import matplotlib.pyplot as plt

dados = pd.read_csv("https://raw.githubusercontent.com/datasciencedojo/datasets/master/titanic.csv")

# Imprimir as primeiras 5 linhas dos dados
dados.head()

# Inspecionar os nomes das colunas
dados.columns

# Obter informa√ß√£o global do conjunto de dados
dados.info()

"""## 1.1 Plotting com Pandas

O Pandas usa o m√©todo `plot()` para criar diagramas a partir de um DataFrame.

O subm√≥dulo Pyplot, da biblioteca Matplotlib, permite visualizar o diagrama no ecr√£, bem como personalizar alguns par√¢metros (t√≠tulo, nomes dos eixos, cores, etc.) e exportar os

Para import o subm√≥dulo Pyplot do Matplotlib, devemos indicar a seguinte linha no cabe√ßalho do nosso c√≥digo:

```python
import matplotlib.pyplot as plt
```

## 1.2 Gr√°fico de barras

Para gerar um visualiza√ß√£o que permita mostrar a distribui√ß√£o por sexo, recorremos a um gr√°fico de barras. No entanto, primeiro necessitamos de saber quais os valores para cada classe (sexo), para posteriormente gerar o gr√°fico.

No m√©todo `plot()` existe um argumento (`kind`) que permite especificar o tipo de gr√°fico que pretendemos constuir. Algumas das op√ß√µes dispon√≠veis est√£o listadas a seguir:

* 'line' : line plot (default)
* 'bar' : vertical bar plot
* 'barh' : horizontal bar plot
* 'hist' : histogram
* 'box' : boxplot
* 'kde' : Kernel Density Estimation plot
* 'density' : same as 'kde'
* 'area' : area plot
* 'pie' : pie plot
* 'scatter' : scatter plot (DataFrame only)
* 'hexbin' : hexbin plot (DataFrame only)
"""

# Obter a contagem por classe
sex_counts = dados["Sex"].value_counts()
print(sex_counts)

# Criar o gr√°fico de barras
"""
Vamos usar o m√©todo plot() associada √† vari√°vel 'sex_counts',
uma vez que esta contem os valores (contagem) para cada classe
"""
sex_counts.plot(kind='bar')

# Adicionar t√≠tulo geral (title) e nomes dos eixos (xlabel e ylabel)
sex_counts.plot(kind='bar',
                title='N√∫mero de passageiros por g√©nero',
                xlabel='G√©nero',
                ylabel='N√∫mero')

"""## 1.3 Gr√°fico circular

Para gerar um visualiza√ß√£o que permita mostrar a distribui√ß√£o por classe, podemos explorar o uso de um gr√°fico circular. No entanto, primeiro necessitamos de saber quais os valores para cada classe (1¬™, 2¬™, 3¬™), atrav√©s do m√©todo `value_counts()` associado √† coluna `dados['PClass']`, para posteriormente gerar o gr√°fico do tipo `kind='pie'`.
"""

# Obter a contagem por classe de passageiro
pclass_counts = dados["Pclass"].value_counts()
print(pclass_counts)

# Criar o gr√°fico circular
pclass_counts.plot(kind='pie',
                title='classe de passageiros',
                xlabel='classe',
                ylabel='N√∫mero')

# 1. Adicione o t√≠tulo "Distribui√ß√£o dos passageiros por classe"
# 2. Adicione a legenda para o eixo dos yy "Classe do Passageiro"
pclass_counts.plot(kind='pie',
                   title="Distribui√ß√£o dos passageiros por classe",
                   ylabel="Classe do Passageiro")

"""## 1.4 Gr√°fico de barras horizontal

Para gerar um visualiza√ß√£o que permita mostrar a distribui√ß√£o por porto de embarque, podemos explorar o uso de um gr√°fico de barras horizontal. No entanto, primeiro necessitamos de saber quais os valores para cada classe (porto de embarque), atrav√©s do m√©todo `value_counts()` associado √† coluna `dados['Embarked']`, para posteriormente gerar o gr√°fico do tipo `kind='barh'`.
"""

# Obter a contagem por classe
embarked_counts = dados["Embarked"].value_counts()
print(embarked_counts)

# Criar o gr√°fico de barras horizontal
"""
O tipo de plot deve ser kind='barh'
"""
embarked_counts.plot(kind= 'barh')

# 1. Adicione o t√≠tulo "Distribui√ß√£o dos passageiros por porto de embarque"
# 2. Adicione a legenda para o eixo dos xx "Porto de Embarque"
# 3. Adicione a legenda para o eixo dos yy "N√∫mero de passageiros"
pclass_counts.plot(kind='barh',
                   title="Distribui√ß√£o dos passageiros por porto de embarque",
                   xlabel="Porto de Embarque",
                   ylabel="N√∫mero de passageiros")

"""## 1.5 Histograma

Para gerar um visualiza√ß√£o que permita mostrar a distribui√ß√£o das idades, podemos explorar o uso de um histograma. Para tal basta aplicar o m√©todo `plot()` √† S√©rie `dados['Age']`, especificando o tipo de gr√°fico como `kind='hist'`. Podemos ainda especificar o n√∫mero de bins, que permite obter mais ou menos detalhe, consoante o valor. Um valor maior permite obter mais detalhe.
"""

dados['Age'].plot(kind='hist')

# Alterar o n√∫mero de bins no histograma
dados['Age'].plot(kind='hist', bins=5)

# 1. Alterar o n√∫mero de bins no histograma para bins=20
dados['Age'].plot(kind='hist', bins=20)

# 1. Adicionar o t√≠tulo para "Distribui√ß√£o das Idades"
# 2. Adicionar o nome do eixo dos xx como "Idade"
# 3. Adicionar o nome do eixo dos yy como "Frequ√™ncia"
dados['Age'].plot(kind='hist',
                  bins=10,
                  title="Distribui√ß√£o das Idades",
                  xlabel="Idade",
                  ylabel="Frequ√™ncia")

# Podemos ainda alterar a cor das barras atrav√©s do argumento color
# e a cor do limite atrav√©s do argumento edgecolor
dados['Age'].plot(kind='hist',
                  bins=10,
                  color='green',
                  edgecolor='black')

"""## 1.5 Exportar o gr√°fico

Para exportar o gr√°fico criado com o Pandas, basta usar o m√©todo `savefig()` associado ao m√≥dulo Pyplot, onde o primeiro argumento √© o nome do ficheiro pretendido (`fname`). Existem ainda outros par√¢metros √∫teis, como:

* `dpi`: resolu√ß√£o da imagem (ex: 300 para impress√µes)
* `box_inches='tight'`: remove espa√ßos desnecess√°rios
* `transparent=True`: fundo transparente
"""

# Criar o gr√°fico
dados['Age'].plot(kind='hist',
                  bins=10,
                  color='green',
                  edgecolor='black')

# Exportar o gr√°fico
plt.savefig(fname='histograma_idades.png',
            dpi=300,
            bbox_inches='tight',
            transparent=True)